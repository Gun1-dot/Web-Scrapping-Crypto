import requests
from bs4 import BeautifulSoup
import time

def get_btc_price():
    url = "https://pluang.com/explore/crypto/1"
    headers = {"User-Agent": "Mozilla/5.0"}
    response = requests.get(url, headers=headers)
    soup = BeautifulSoup(response.text, 'html.parser')

    try:
        # This may change over time based on Pluang HTML; inspect their page to get the correct class
        price_tag = soup.find('p', class_="chakra-text css-1cxdg1z")  # Adjust this if it breaks
        return price_tag.text.strip()
    except:
        return "Error fetching price"

def update_html(price):
    html_content = f"""
    <!DOCTYPE html>
    <html>
    <head>
        <meta http-equiv="refresh" content="30">
        <title>Live BTC Price</title>
        <style>
            body {{ font-family: Arial, sans-serif; text-align: center; padding-top: 100px; }}
            .price {{ font-size: 48px; color: green; }}
        </style>
    </head>
    <body>
        <h1>Live Bitcoin Price (Pluang)</h1>
        <div class="price">{price}</div>
        <p>Last updated: {time.strftime("%Y-%m-%d %H:%M:%S")}</p>
        <p>Refreshes every 30 seconds</p>
    </body>
    </html>
    """
    with open("index.html", "w", encoding="utf-8") as f:
        f.write(html_content)

# Run loop
while True:
    btc_price = get_btc_price()
    update_html(btc_price)
    time.sleep(30)
